<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Connect AI | MELIORO Systems</title>
    
    <!-- Core Styles -->
    <link rel="stylesheet" href="theme-base.css">
    <link rel="stylesheet" href="theme-claude.css">
    <link rel="stylesheet" href="theme-google.css">
    <link rel="stylesheet" href="theme-replit.css">
    
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ü§ñ</text></svg>">
</head>
<body>
    <div class="chat-container">
        <!-- HLAVIƒåKA -->
        <div class="chat-header">
            <div class="header-content">
                <h1><a href="#" onclick="location.reload(); return false;" class="header-logo-link">My Connect AI</a></h1>
                <div class="header-subtitle">Hybridn√≠ AI Connect syst√©m - nov√° architektura</div>
            </div>
            <div class="header-buttons">
                <button class="index-button" onclick="if(window.uiManager) window.uiManager.showWelcomeScreen()" title="Zpƒõt na √∫vodn√≠ stranu">
                    Index
                </button>
                <div class="dropdown">
                    <button class="menu-button" onclick="if(window.uiManager) window.uiManager.toggleMainMenu()">
                        Menu
                    </button>
                    <div class="dropdown-content" id="mainMenu">
                        <button class="dropdown-item" onclick="if(window.uiManager) { window.uiManager.showSystemHelp(); window.uiManager.closeMainMenu(); }">
                            Jak syst√©m funguje
                        </button>
                        <button class="dropdown-item" onclick="if(window.uiManager) { window.uiManager.showDataProtection(); window.uiManager.closeMainMenu(); }">
                            Ochrana dat
                        </button>
                        <button class="dropdown-item" onclick="refreshData(); if(window.uiManager) window.uiManager.closeMainMenu();">
                            Obnovit data
                        </button>
                        <button class="dropdown-item" onclick="runDiagnosticsManual(); if(window.uiManager) window.uiManager.closeMainMenu();">
                            Diagnostika
                        </button>
                        <button class="dropdown-item" onclick="if(window.settingsManager) { window.settingsManager.toggle(); } if(window.uiManager) window.uiManager.closeMainMenu();">
                            Nastaven√≠
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- NASTAVEN√ç PANEL -->
        <div id="settings-panel" class="settings-panel" style="display: none;">
            <div class="settings-title">Nastaven√≠ syst√©mu</div>
            
            <!-- AI PROVIDERY -->
            <div class="settings-block">
                <div class="block-title">ü§ñ AI Providery</div>
                <div class="block-description">Vyberte a nastavte AI providera pro komunikaci</div>
                
                <div class="settings-section">
                    <label>Aktivn√≠ AI Provider</label>
                    <select id="ai-provider-select" onchange="if(window.settingsManager) window.settingsManager.updateAIProviderDisplay()">
                        <option value="openai">OpenAI (ChatGPT)</option>
                        <option value="gemini">Google Gemini</option>
                        <option value="claude">Anthropic Claude</option>
                    </select>
                    <small>Vyberte preferovan√Ω AI model pro komunikaci</small>
                </div>
                
                <!-- OpenAI nastaven√≠ -->
                <div id="openai-provider" class="ai-provider-settings">
                    <div class="settings-section">
                        <label for="openai-key">OpenAI API kl√≠ƒç</label>
                        <div class="input-group">
                            <input type="password" id="openai-key" placeholder="sk-...">
                            <button onclick="if(window.uiManager) window.uiManager.toggleVisibility('openai-key')" class="toggle-btn">Zobrazit</button>
                        </div>
                        <small>Z√≠skejte na <a href="https://platform.openai.com/api-keys" target="_blank">platform.openai.com</a></small>
                    </div>
                </div>
                
                <!-- Gemini nastaven√≠ -->
                <div id="gemini-provider" class="ai-provider-settings" style="display: none;">
                    <div class="settings-section">
                        <label for="gemini-key">Google Gemini API kl√≠ƒç</label>
                        <div class="input-group">
                            <input type="password" id="gemini-key" placeholder="AIza...">
                            <button onclick="if(window.uiManager) window.uiManager.toggleVisibility('gemini-key')" class="toggle-btn">Zobrazit</button>
                        </div>
                        <small>Z√≠skejte na <a href="https://aistudio.google.com/app/apikey" target="_blank">aistudio.google.com</a></small>
                    </div>
                </div>
                
                <!-- Claude nastaven√≠ -->
                <div id="claude-provider" class="ai-provider-settings" style="display: none;">
                    <div class="settings-section">
                        <label for="claude-key">Anthropic Claude API kl√≠ƒç</label>
                        <div class="input-group">
                            <input type="password" id="claude-key" placeholder="sk-ant-...">
                            <button onclick="if(window.uiManager) window.uiManager.toggleVisibility('claude-key')" class="toggle-btn">Zobrazit</button>
                        </div>
                        <small>Z√≠skejte na <a href="https://console.anthropic.com/" target="_blank">console.anthropic.com</a></small>
                    </div>
                </div>
            </div>
            
            <!-- CRM PROVIDERY -->
            <div class="settings-block">
                <div class="block-title">üìä CRM Providery</div>
                <div class="block-description">P≈ôipojen√≠ k va≈°im CRM syst√©m≈Øm</div>
                
                <!-- Tabidoo -->
                <div class="crm-provider">
                    <div class="crm-provider-header">
                        <div class="crm-provider-info">
                            <strong>Tabidoo CRM</strong>
                            <span class="crm-provider-status" id="tabidoo-status">Nep≈ôipojeno</span>
                        </div>
                        <button class="crm-provider-toggle" onclick="if(window.uiManager) window.uiManager.toggleCRMProvider('tabidoo')">Nastavit</button>
                    </div>
                    
                    <div id="tabidoo-provider" class="crm-provider-settings" style="display: none;">
                        <div class="settings-section">
                            <label for="tabidoo-app-id">App ID</label>
                            <input type="text" id="tabidoo-app-id" placeholder="CRM Start">
                            <small>N√°zev va≈°√≠ aplikace v Tabidoo</small>
                        </div>
                        
                        <div class="settings-section">
                            <label for="tabidoo-token">API Token</label>
                            <div class="input-group">
                                <input type="password" id="tabidoo-token" placeholder="eyJ...">
                                <button onclick="if(window.uiManager) window.uiManager.toggleVisibility('tabidoo-token')" class="toggle-btn">Zobrazit</button>
                            </div>
                            <small>Najdete v Tabidoo ‚Üí Nastaven√≠ ‚Üí API</small>
                        </div>
                    </div>
                </div>
                
                <!-- P≈ôipraveno pro dal≈°√≠ CRM -->
                <div class="crm-provider future-provider">
                    <div class="crm-provider-header">
                        <div class="crm-provider-info">
                            <strong>HubSpot, Salesforce, Pipedrive...</strong>
                            <span class="crm-provider-status">P≈ôipravujeme</span>
                        </div>
                        <button class="crm-provider-toggle" disabled>Brzy</button>
                    </div>
                </div>
            </div>
            
            <!-- OBECN√â NASTAVEN√ç -->
            <div class="settings-block">
                <div class="block-title">‚öôÔ∏è Obecn√© nastaven√≠</div>
                <div class="block-description">Vzhled a spr√°va konfigurace</div>
                
                <div class="settings-section">
                    <label>Barevn√© sch√©ma</label>
                    <div class="theme-selector">
                        <div class="theme-option theme-claude active" onclick="if(window.uiManager) window.uiManager.setTheme('claude')" title="Claude (v√Ωchoz√≠)"></div>
                        <div class="theme-option theme-google" onclick="if(window.uiManager) window.uiManager.setTheme('google')" title="Google"></div>
                        <div class="theme-option theme-replit" onclick="if(window.uiManager) window.uiManager.setTheme('replit')" title="Replit"></div>
                    </div>
                    <small>Vyberte barevn√© sch√©ma rozhran√≠</small>
                </div>
                
                <div class="settings-section">
                    <label>Spr√°va konfigurace</label>
                    <div class="config-actions">
                        <button onclick="exportConfig()" class="config-btn">
                            üì§ Export konfigurace
                        </button>
                        <button onclick="importConfig()" class="config-btn">
                            üì• Import konfigurace
                        </button>
                        <button onclick="if(window.settingsManager) window.settingsManager.clearAllData()" class="config-btn danger">
                            üóëÔ∏è Vymazat v≈°e
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="settings-actions">
                <button onclick="if(window.settingsManager) window.settingsManager.save()" class="primary-btn">Ulo≈æit nastaven√≠</button>
                <button onclick="if(window.settingsManager) window.settingsManager.close()" class="secondary-btn">Zru≈°it</button>
            </div>
            
            <div class="security-info">
                V≈°echny API kl√≠ƒçe jsou ≈°ifrov√°ny a ukl√°d√°ny pouze lok√°lnƒõ ve va≈°em prohl√≠≈æeƒçi.
            </div>
        </div>
        
        <!-- LOADING INDIK√ÅTOR -->
        <div id="loading-status" class="loading-status" style="display: none;">
            <span id="loading-text">Naƒç√≠t√°m syst√©m...</span>
            <div class="progress-bar">
                <div id="loading-progress" class="progress-fill"></div>
            </div>
        </div>
        
        <!-- CHAT OBLAST -->
        <div id="chat-messages" class="chat-messages">
            <div class="welcome-container">
                <div class="example-queries" id="example-queries">
                    <!-- P≈ô√≠klady budou naƒçteny dynamicky -->
                </div>
            </div>
        </div>
        
        <!-- INPUT OBLAST -->
        <div class="chat-input-area" id="chat-input-area">
            <textarea id="chat-input" class="chat-input" placeholder="Zeptejte se na cokoliv o va≈°ich datech..." rows="1"></textarea>
            <button id="send-button" class="send-button" onclick="sendMessage()">
                Odeslat
            </button>
        </div>
        
        <!-- PATIƒåKA -->
        <div class="app-footer">
            <div class="footer-content">
                <span class="footer-text">Powered by <a href="http://melioro.cz" target="_blank" rel="noopener noreferrer" class="footer-link"><strong>MELIORO Systems</strong></a></span>
                <span class="footer-domain">myconnectai.online</span>
                <span class="footer-version">v2.0 - Modular Architecture</span>
            </div>
        </div>
    </div>

    <!-- CORE SYSTEM SCRIPTS -->
    <script src="core-security.js"></script>
    <script src="core-config.js"></script>
    
    <!-- PROVIDER REGISTRIES -->
    <script src="registry-providers.js"></script>
    
    <!-- AI PROVIDERS -->
    <script src="ai-base-connector.js"></script>
    <script src="ai-openai-connector.js"></script>
    <script src="ai-gemini-connector.js"></script>
    <script src="ai-claude-connector.js"></script>
    
    <!-- CRM PROVIDERS -->
    <script src="crm-base-connector.js"></script>
    <script src="crm-tabidoo-connector.js"></script>
    
    <!-- CORE FUNCTIONALITY -->
    <script src="core-query-processor.js"></script>
    <script src="core-search-engine.js"></script>
    <script src="core-display.js"></script>
    
    <!-- UI MANAGEMENT -->
    <script src="ui-base-manager.js"></script>
    <script src="settings-base-manager.js"></script>
    
    <!-- MAIN APPLICATION -->
    <script src="core-main.js"></script>
    
    <!-- GLOBAL COMPATIBILITY FUNCTIONS -->
    <script>
        // === GLOBAL COMPATIBILITY ===
        
        function refreshData() {
            if (!confirm('Opravdu chcete znovu naƒç√≠st data?')) return;
            if (window.coreSystem) {
                window.coreSystem.refreshData();
            } else {
                location.reload();
            }
        }
        
        function runDiagnosticsManual() {
            if (window.coreSystem) {
                window.coreSystem.runDiagnostics();
            }
        }
        
        function exportConfig() {
            if (window.settingsManager) {
                window.settingsManager.exportConfiguration();
            }
        }
        
        function importConfig() {
            if (window.settingsManager) {
                window.settingsManager.importConfiguration();
            }
        }
        
        function sendMessage() {
            if (window.coreSystem) {
                window.coreSystem.processMessage();
            }
        }
        
        // Debug function
        window.debugSystem = function() {
            return {
                version: '2.0.0-modular',
                architecture: 'clean-modular',
                providers: window.providerRegistry ? window.providerRegistry.getStatus() : {},
                status: 'ready'
            };
        };
        
        console.log('üöÄ My Connect AI v2.0 - Modular Architecture Loading...');
    </script>
</body>
</html>
